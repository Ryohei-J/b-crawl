{% load django_bootstrap5 %}
{% bootstrap_css %}
{% load static %}

<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B-Crawl</title>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> -->
    <link rel="icon" href="{% static 'favicon.ico' %}">
    <script src="https://kit.fontawesome.com/06ec94aeea.js" crossorigin="anonymous"></script>
</head>

<body>
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <div class="row g-0">
        <div class="col-md-4 offset-md-4 text-center">
            <h1>B-Crawl</h1>
        </div>
        <div class="col-md-2 offset-md-5 text-center">
            <!-- get daata -->
            <form method="post" id="form">
                {% csrf_token %}
                {{ form.as_p }}
                {% bootstrap_button button_type="submit" content="取得" button_class="btn custom-component" %}
            </form>
            <!-- history -->
            <div class="history-btn-container">
                <button type=“button” onclick="location.href='./history-all'" class="btn btn-history custom-component">
                    みんなの履歴
                </button>
                <!-- <button type=“button” onclick="location.href='./history-yours'" class="btn btn-history custom-component"
                    disabled>
                    あなたの履歴
                </button> -->
            </div>
        </div>

        <div class="col-md-4 offset-md-4">
            <!-- about, how to use -->
            <h2>このアプリについて</h2>
            <p class="text">
                掲示板のスレッドのURLを入力すると、全レスを表示するスクレイピングアプリです。
                何度も「次へ」ボタンで画面を切り替える必要がありません。
                レス数が多いと取得に時間がかかります。
            </p>

            <h2>
                対応掲示板
            </h2>
            <h3>爆サイ</h3>
            <p class="text">[最初から(表示)]をクリックして表示されるページのURLを入力してください。<br />例: https://bakusai.com/*****/tp=1/rw=1/</p>

            <h3>ホスラブ</h3>
            <p class="text">[最初から表示]をクリックして表示されるページのURLを入力してください。<br />例: https://kanto.hostlove.com/fuat/*****/a/1</p>

            <!-- contact -->
            <h2>
                ご意見
            </h2>
            <p class="text">X/TwitterのDMからお願いします。</p>
            <div class="icon">
                <a href="https://twitter.com/dj_sudo" target="_blank" class="icon-twitter">
                    <i class="fa-brands fa-square-x-twitter fa-2xl" style="color: #dddddd;"></i>
                </a>
            </div>
        </div>
    </div>
</body>

</html>

<script>
    document.getElementById('form').addEventListener('submit', function (event) {
        // フォームのデフォルト送信を防ぐ
        event.preventDefault();

        // フォームデータを取得
        const formData = new FormData(this);

        // データを保存するためのオブジェクトを作成
        const data = {};
        formData.forEach((value, key) => {
            data[key] = value;
        });

        // フォームデータをlocalStorageに保存
        localStorage.setItem('formData', JSON.stringify(data));

        // 必要に応じて、保存後にフォームを送信することも可能
        this.submit(); // 保存後にフォームを送信したい場合はこの行をコメントアウト解除
    });
</script>